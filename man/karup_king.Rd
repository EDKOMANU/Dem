% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/karup_king.R
\name{karup_king}
\alias{karup_king}
\title{Split Age Groups into Single-Year Ages}
\usage{
karup_king(
  df,
  age_col = "age_group",
  pops = "population",
  first_coef = first_coef,
  middle_coef = middle_coef,
  last_coef = last_coef
)
}
\arguments{
\item{df}{A data frame containing grouped population data.}

\item{age_col}{A string specifying the column in \code{df} that contains age group data (e.g., "15-19").}

\item{pops}{A string or vector of strings specifying one or more columns in \code{df} that contain population data.}

\item{first_coef}{A matrix of coefficients for splitting the first age group. Each row corresponds to a single-year age within the group, and columns represent neighbouring group weights. Defaults to:

\if{html}{\out{<div class="sourceCode">}}\preformatted{first_coef <- matrix(
  c(0.344, -0.208, 0.064,   # Year 1 (e.g., age 15 in 15-19)
    0.248, -0.056, 0.008,   # Year 2 (age 16)
    0.176, 0.048, -0.024,   # Year 3 (age 17)
    0.128, 0.104, -0.032,   # Year 4 (age 18)
    0.104, 0.112, -0.016),  # Year 5 (age 19)
  nrow = 5, byrow = TRUE
)
}\if{html}{\out{</div>}}}

\item{middle_coef}{A matrix of coefficients for splitting middle age groups. Each row corresponds to a single-year age within the group, and columns represent neighbouring group weights. Defaults to:

\if{html}{\out{<div class="sourceCode">}}\preformatted{middle_coef <- matrix(
  c(0.064, 0.152, -0.016,   # Year 1 (e.g., age 20 in 20-24)
    0.008, 0.224, -0.032,   # Year 2 (age 21)
    -0.024, 0.248, -0.024,   # Year 3 (age 22)
    -0.032, 0.224, 0.008,   # Year 4 (age 23)
    -0.016, 0.152, 0.064),  # Year 5 (age 24)
  nrow = 5, byrow = TRUE
)
}\if{html}{\out{</div>}}}

\item{last_coef}{A matrix of coefficients for splitting the last age group. Each row corresponds to a single-year age within the group, and columns represent neighbouring group weights. Defaults to:

\if{html}{\out{<div class="sourceCode">}}\preformatted{last_coef <- matrix(
  c(-0.016, 0.112, 0.104,   # Year 1 (e.g., age 35 in 35-39)
    -0.032, 0.104, 0.128,   # Year 2 (age 36)
    -0.024, 0.048, 0.176,   # Year 3 (age 37)
    0.008, -0.056, 0.248,   # Year 4 (age 38)
    0.064, -0.208, 0.344),  # Year 5 (age 39)
  nrow = 5, byrow = TRUE
)
}\if{html}{\out{</div>}}

Overflow ages refer to ages that fall outside the range of the initial grouped data. These are removed to ensure the resulting data frame contains only ages that are relevant and within the specified age group boundaries.}
}
\value{
A data frame with single-year ages and corresponding population estimates for each specified population column.
}
\description{
This function takes grouped population data (e.g., 5-year age groups) and distributes the population into single-year age groups using a coefficient-based interpolation approach. The user can specify the column containing age groups, one or more population columns, and coefficient matrices for edge and middle groups.
}
\examples{


#first_coef <- matrix(
#c(0.344, -0.208, 0.064,   # Year 1 (e.g., age 15 in 15-19)
# 0.248, -0.056, 0.008,   # Year 2 (age 16)
# 0.176, 0.048, -0.024,   # Year 3 (age 17)
#  0.128, 0.104, -0.032,   # Year 4 (age 18)
# 0.104, 0.112, -0.016),  # Year 5 (age 19)
# nrow = 5, byrow = TRUE)
#Coefficients for MIDDLE groups (columns: [previous, current, next])
#middle_coef <- matrix(
# c(0.064, 0.152, -0.016,   # Year 1 (e.g., age 20 in 20-24)
#   0.008, 0.224, -0.032,   # Year 2 (age 21)
#   -0.024, 0.248, -0.024,   # Year 3 (age 22)
#   -0.032, 0.224, 0.008,   # Year 4 (age 23)
#   -0.016, 0.152, 0.064),  # Year 5 (age 24)
# nrow = 5, byrow = TRUE
#)
# Coefficients for LAST group (columns: [previous-1, previous, current])
#last_coef <- matrix(
 #c(-0.016, 0.112, 0.104,   # Year 1 (e.g., age 35 in 35-39)
  # -0.032, 0.104, 0.128,   # Year 2 (age 36)
  #-0.024, 0.048, 0.176,   # Year 3 (age 37)
  # 0.008, -0.056, 0.248,   # Year 4 (age 38)
  # 0.064, -0.208, 0.344),  # Year 5 (age 39)
 #nrow = 5, byrow = TRUE
 #)
# ------------------------------
# STEP 2: Prepare Sample Data
# ------------------------------

karup_king(df = data,
age_col = "age_col",
pops = c("2021","2022","2023","2024","2025","2026","2027"),
first_coef = first_coef,
middle_coef = middle_coef,
last_coef = last_coef
)

}
